<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Data Collection & Analysis AI — Expanded</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- Libraries -->
  <!-- Chart.js (charts) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
  <!-- PapaParse (robust CSV parsing) -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
  <header class="app-header">
    <h1>Data Collection & Analysis — AI Assistant (Expanded)</h1>
    <p class="sub">Advanced EDA, cleaning, feature engineering, visualization, and lightweight models — all in-browser.</p>
  </header>

  <main class="layout">
    <!-- Left: Inputs & Controls -->
    <aside class="panel" id="left-panel">
      <h2>Input & Controls</h2>

      <div id="dropZone" class="drop">Drag & Drop CSV here or click to browse</div>
      <input type="file" id="fileInput" accept="text/csv" style="display:none" />

      <label for="pasteArea">Paste CSV / Tabular text</label>
      <textarea id="pasteArea" placeholder="name,age,salary
Alice,30,70000
Bob,25,52000"></textarea>

      <div class="row">
        <button id="parseBtn">Parse Pasted Text</button>
        <button id="sampleBtn">Load Sample Data</button>
        <button id="clearBtn">Clear Data</button>
      </div>

      <hr />

      <h3>Cleaning</h3>
      <div class="row">
        <button id="autoCleanBtn">Auto Clean (Impute)</button>
        <button id="scaleBtn">Scale Numeric (z-score)</button>
        <button id="encodeBtn">One-Hot Encode Categorical</button>
      </div>

      <h3>Modeling</h3>
      <div class="row">
        <label>Target</label>
        <select id="targetSelect"></select>
      </div>
      <div class="row">
        <label>Choose Features (ctrl+click)</label>
        <select id="featuresSelect" multiple size="6"></select>
      </div>

      <div class="row">
        <button id="trainLRBtn">Train Linear Regression</button>
        <button id="trainLogisticBtn">Train Logistic Regression</button>
        <button id="kmeansBtn">Run k-Means</button>
      </div>

      <div class="row">
        <button id="exportCsvBtn">Export CSV</button>
        <button id="exportModelBtn">Export Model (JSON)</button>
      </div>

      <small class="note">Tip: Use sample data to explore quickly. Large datasets may be slow because computation runs in the browser.</small>
    </aside>

    <!-- Middle: Visuals & Table -->
    <section class="panel" id="vis-panel">
      <h2>Visualizations</h2>

      <div class="charts">
        <div class="chart-card">
          <h4>Histogram / Boxplot</h4>
          <select id="histColSelect"></select>
          <canvas id="histChart" height="240"></canvas>
          <canvas id="boxChart" height="100"></canvas>
        </div>

        <div class="chart-card">
          <h4>Scatter & Regression Line</h4>
          <div class="row"><select id="xSelect"></select><select id="ySelect"></select></div>
          <canvas id="scatterChart" height="240"></canvas>
        </div>
      </div>

      <div class="charts">
        <div class="chart-card">
          <h4>Correlation Heatmap</h4>
          <canvas id="corrCanvas" height="220"></canvas>
        </div>
        <div class="chart-card">
          <h4>PCA (2 components)</h4>
          <canvas id="pcaChart" height="220"></canvas>
        </div>
      </div>

      <h3>Data Table</h3>
      <div id="dataTable" class="table-wrapper"></div>
    </section>

    <!-- Right: Analysis & Results -->
    <aside class="panel" id="analysis-panel">
      <h2>AI Analysis & Results</h2>

      <div class="card">
        <h4>Dataset Summary</h4>
        <pre id="summaryPre">(no data)</pre>
      </div>

      <div class="card">
        <h4>Automated Suggestions</h4>
        <ul id="suggestionsList"><li>Load data to receive suggestions.</li></ul>
      </div>

      <div class="card">
        <h4>Model / Clustering Output</h4>
        <pre id="modelPre">(no model trained)</pre>
      </div>
    </aside>
  </main>

  <footer class="footer">
    <small>Expanded edition — educational. See comments inside app.js for detailed thought process.</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
